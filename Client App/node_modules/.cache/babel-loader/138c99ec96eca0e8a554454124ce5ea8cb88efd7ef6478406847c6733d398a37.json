{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\WIN 10\\\\Desktop\\\\H\\u1ECDc t\\u1EADp funix\\\\m\\xF4n Nodejs\\\\Assignment 2_ Phan Ho\\xE0ng \\xC2n_FX21936\\\\Client App\\\\src\\\\Components\\\\SearchPage\\\\SearchList.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport styles from \"./SearchList.module.css\";\nimport SearchListItem from \"./SearchListItem\";\nimport { useSelector } from \"react-redux\";\nimport { useNavigate, useSearchParams } from \"react-router-dom\";\nimport { useDispatch } from \"react-redux\";\nimport { loginActions } from \"../../store/store\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst SearchList = function () {\n  _s();\n  const [searchParams] = useSearchParams();\n  const navigate = useNavigate();\n  const dispatch = useDispatch();\n  const searchData = useSelector(state => state.search);\n  const [searchList, setSearchList] = useState([]);\n  const postSearchData = async () => {\n    try {\n      const response = await fetch(`http://localhost:5000/hotel/search`, {\n        method: \"POST\",\n        mode: \"cors\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        credentials: \"include\",\n        body: JSON.stringify(searchData)\n      });\n      if (response.status === 401) {\n        const errorMessage = await response.json();\n        dispatch(loginActions.LOGOUT());\n        navigate(\"/user?mode=login\");\n        throw new Error(errorMessage.message);\n      }\n      const data = await response.json();\n      setSearchList(data);\n    } catch (err) {\n      console.log(err);\n    }\n  };\n  useEffect(() => {\n    postSearchData();\n  }, [searchData]);\n  console.log(searchList);\n  //Render ra list các Thẻ thông tin khách sạn trong danh sách tìm kiếm\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: styles.searchList,\n    children: [searchList.length === 0 && /*#__PURE__*/_jsxDEV(\"h3\", {\n      className: styles.message,\n      children: \"No Hotel Found!\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 9\n    }, this), searchList.map(item => /*#__PURE__*/_jsxDEV(SearchListItem, {\n      id: item._id,\n      name: item.name,\n      distance: item.distance,\n      city: item.city,\n      type: item.rooms.map(room => room.title).join(\" - \"),\n      description: item.type,\n      price: item.cheapestPrice,\n      rate: item.rating,\n      image_url: item.photos[0]\n    }, item._id, false, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 9\n    }, this))]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 42,\n    columnNumber: 5\n  }, this);\n};\n_s(SearchList, \"w0mK9zh3cyrQYPPuurkkkqdI5ks=\", false, function () {\n  return [useSearchParams, useNavigate, useDispatch, useSelector];\n});\n_c = SearchList;\nexport default SearchList;\nvar _c;\n$RefreshReg$(_c, \"SearchList\");","map":{"version":3,"names":["React","useEffect","useState","styles","SearchListItem","useSelector","useNavigate","useSearchParams","useDispatch","loginActions","jsxDEV","_jsxDEV","SearchList","_s","searchParams","navigate","dispatch","searchData","state","search","searchList","setSearchList","postSearchData","response","fetch","method","mode","headers","credentials","body","JSON","stringify","status","errorMessage","json","LOGOUT","Error","message","data","err","console","log","className","children","length","fileName","_jsxFileName","lineNumber","columnNumber","map","item","id","_id","name","distance","city","type","rooms","room","title","join","description","price","cheapestPrice","rate","rating","image_url","photos","_c","$RefreshReg$"],"sources":["C:/Users/WIN 10/Desktop/Học tập funix/môn Nodejs/Assignment 2_ Phan Hoàng Ân_FX21936/Client App/src/Components/SearchPage/SearchList.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport styles from \"./SearchList.module.css\";\r\nimport SearchListItem from \"./SearchListItem\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { useNavigate, useSearchParams } from \"react-router-dom\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { loginActions } from \"../../store/store\";\r\nconst SearchList = function () {\r\n  const [searchParams] = useSearchParams();\r\n  const navigate = useNavigate();\r\n  const dispatch = useDispatch();\r\n  const searchData = useSelector((state) => state.search);\r\n  const [searchList, setSearchList] = useState([]);\r\n  const postSearchData = async () => {\r\n    try {\r\n      const response = await fetch(`http://localhost:5000/hotel/search`, {\r\n        method: \"POST\",\r\n        mode: \"cors\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        credentials: \"include\",\r\n        body: JSON.stringify(searchData),\r\n      });\r\n      if (response.status === 401) {\r\n        const errorMessage = await response.json();\r\n        dispatch(loginActions.LOGOUT());\r\n        navigate(\"/user?mode=login\");\r\n        throw new Error(errorMessage.message);\r\n      }\r\n      const data = await response.json();\r\n      setSearchList(data);\r\n    } catch (err) {\r\n      console.log(err);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    postSearchData();\r\n  }, [searchData]);\r\n  console.log(searchList);\r\n  //Render ra list các Thẻ thông tin khách sạn trong danh sách tìm kiếm\r\n  return (\r\n    <div className={styles.searchList}>\r\n      {searchList.length === 0 && (\r\n        <h3 className={styles.message}>No Hotel Found!</h3>\r\n      )}\r\n      {searchList.map((item) => (\r\n        <SearchListItem\r\n          key={item._id}\r\n          id={item._id}\r\n          name={item.name}\r\n          distance={item.distance}\r\n          city={item.city}\r\n          type={item.rooms.map((room) => room.title).join(\" - \")}\r\n          description={item.type}\r\n          price={item.cheapestPrice}\r\n          rate={item.rating}\r\n          image_url={item.photos[0]}\r\n        />\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\nexport default SearchList;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}
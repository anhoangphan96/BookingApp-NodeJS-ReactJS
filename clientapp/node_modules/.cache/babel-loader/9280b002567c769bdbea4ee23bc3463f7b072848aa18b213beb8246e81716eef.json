{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\WIN 10\\\\Desktop\\\\H\\u1ECDc t\\u1EADp funix\\\\m\\xF4n Nodejs\\\\Assignment 2_ Phan Ho\\xE0ng \\xC2n_FX21936\\\\clientapp\\\\src\\\\Components\\\\SearchPage\\\\SearchList.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport styles from \"./SearchList.module.css\";\nimport SearchListItem from \"./SearchListItem\";\nimport { useNavigate, useSearchParams } from \"react-router-dom\";\nimport { useDispatch } from \"react-redux\";\nimport { loginActions } from \"../../store/store\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst SearchList = function () {\n  _s();\n  const [searchParams] = useSearchParams();\n  const navigate = useNavigate();\n  const dispatch = useDispatch();\n  const [searchList, setSearchList] = useState([]);\n  const [errorMessage, setErrorMessage] = useState(\"No Hotel found\");\n  const postSearchData = async () => {\n    try {\n      const response = await fetch(`http://localhost:5000/hotel/search`, {\n        method: \"POST\",\n        mode: \"cors\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        credentials: \"include\",\n        body: JSON.stringify({\n          destination: searchParams.get(\"des\"),\n          date: searchParams.get(\"date\"),\n          adult: Number(searchParams.get(\"adult\")),\n          children: Number(searchParams.get(\"children\")),\n          room: Number(searchParams.get(\"room\"))\n        })\n      });\n      if (response.status === 401) {\n        dispatch(loginActions.LOGOUT());\n        navigate(\"/user?mode=login\");\n      } else if (response.status === 400) {\n        const errorMessage = await response.json();\n        setErrorMessage(errorMessage);\n      }\n      const data = await response.json();\n      setSearchList(data);\n    } catch (err) {\n      console.log(err);\n    }\n  };\n  useEffect(() => {\n    postSearchData();\n  }, []);\n  //Render ra list các Thẻ thông tin khách sạn trong danh sách tìm kiếm\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: styles.searchList,\n    children: [searchList.length === 0 && /*#__PURE__*/_jsxDEV(\"h3\", {\n      className: styles.message,\n      children: \"No Hotel Found!\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 9\n    }, this), searchList.map(item => /*#__PURE__*/_jsxDEV(SearchListItem, {\n      id: item._id,\n      name: item.name,\n      distance: item.distance,\n      city: item.city,\n      type: item.rooms.map(room => room.title).join(\" - \"),\n      description: item.type,\n      price: item.cheapestPrice,\n      rate: item.rating,\n      image_url: item.photos[0]\n    }, item._id, false, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 9\n    }, this))]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 47,\n    columnNumber: 5\n  }, this);\n};\n_s(SearchList, \"5TQd41cDtTCK3vzOkf733njOnps=\", false, function () {\n  return [useSearchParams, useNavigate, useDispatch];\n});\n_c = SearchList;\nexport default SearchList;\nvar _c;\n$RefreshReg$(_c, \"SearchList\");","map":{"version":3,"names":["React","useEffect","useState","styles","SearchListItem","useNavigate","useSearchParams","useDispatch","loginActions","jsxDEV","_jsxDEV","SearchList","_s","searchParams","navigate","dispatch","searchList","setSearchList","errorMessage","setErrorMessage","postSearchData","response","fetch","method","mode","headers","credentials","body","JSON","stringify","destination","get","date","adult","Number","children","room","status","LOGOUT","json","data","err","console","log","className","length","message","fileName","_jsxFileName","lineNumber","columnNumber","map","item","id","_id","name","distance","city","type","rooms","title","join","description","price","cheapestPrice","rate","rating","image_url","photos","_c","$RefreshReg$"],"sources":["C:/Users/WIN 10/Desktop/Học tập funix/môn Nodejs/Assignment 2_ Phan Hoàng Ân_FX21936/clientapp/src/Components/SearchPage/SearchList.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport styles from \"./SearchList.module.css\";\r\nimport SearchListItem from \"./SearchListItem\";\r\nimport { useNavigate, useSearchParams } from \"react-router-dom\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { loginActions } from \"../../store/store\";\r\nconst SearchList = function () {\r\n  const [searchParams] = useSearchParams();\r\n  const navigate = useNavigate();\r\n  const dispatch = useDispatch();\r\n  const [searchList, setSearchList] = useState([]);\r\n  const [errorMessage, setErrorMessage] = useState(\"No Hotel found\");\r\n  const postSearchData = async () => {\r\n    try {\r\n      const response = await fetch(`http://localhost:5000/hotel/search`, {\r\n        method: \"POST\",\r\n        mode: \"cors\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        credentials: \"include\",\r\n        body: JSON.stringify({\r\n          destination: searchParams.get(\"des\"),\r\n          date: searchParams.get(\"date\"),\r\n          adult: Number(searchParams.get(\"adult\")),\r\n          children: Number(searchParams.get(\"children\")),\r\n          room: Number(searchParams.get(\"room\")),\r\n        }),\r\n      });\r\n      if (response.status === 401) {\r\n        dispatch(loginActions.LOGOUT());\r\n        navigate(\"/user?mode=login\");\r\n      } else if (response.status === 400) {\r\n        const errorMessage = await response.json();\r\n        setErrorMessage(errorMessage);\r\n      }\r\n      const data = await response.json();\r\n      setSearchList(data);\r\n    } catch (err) {\r\n      console.log(err);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    postSearchData();\r\n  }, []);\r\n  //Render ra list các Thẻ thông tin khách sạn trong danh sách tìm kiếm\r\n  return (\r\n    <div className={styles.searchList}>\r\n      {searchList.length === 0 && (\r\n        <h3 className={styles.message}>No Hotel Found!</h3>\r\n      )}\r\n      {searchList.map((item) => (\r\n        <SearchListItem\r\n          key={item._id}\r\n          id={item._id}\r\n          name={item.name}\r\n          distance={item.distance}\r\n          city={item.city}\r\n          type={item.rooms.map((room) => room.title).join(\" - \")}\r\n          description={item.type}\r\n          price={item.cheapestPrice}\r\n          rate={item.rating}\r\n          image_url={item.photos[0]}\r\n        />\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\nexport default SearchList;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}